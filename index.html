<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ­å¹Œå¸‚å—åŒº</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="assets/common.js"></script>
    <!-- Intro.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.0.1/introjs.min.css" />
    <meta name="google-site-verification" content="JETLq1GyWycbhYNqeH6vKwRF3iWqubZvXpzOCon0hYU" />
    <!-- Intro.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.0.1/intro.min.js"></script>


</head>
<style>
    /* =========================
   Heroã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼
========================= */
    .hero {
        position: relative;
        margin: 0 auto;
        width: 100%;
        max-width: 500px;
        aspect-ratio: 2/1;
        overflow: hidden;
    }

    .hero-slide {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        z-index: 1;
    }

    .hero-slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .hero-slide.active {
        opacity: 1;
        z-index: 2;
    }

    /* =========================
   ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆã‚«ãƒ¼ãƒ‰æ–¹å¼ï¼‰
========================= */
    #popup {
        position: fixed;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
    }

    .popup-content {
        background: #fff;
        margin: 10px;
        padding: 0;
        border-radius: 15px;
    }

    .popup-content h3 {
        font-size: var(--font-h3);
        margin-bottom: 10px;
    }

    .popup-content select {
        width: 100%;
        white-space: normal;
        word-break: break-word;
        padding: 8px 12px;
        font-size: var(--font-body);
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: #fff;
        cursor: pointer;
    }

    .popup-card {
        display: none;
        flex-direction: column;
        align-items: center;
        text-align: center;
        justify-content: center;
        gap: 1rem;
        position: relative;
        animation: fadeIn 0.3s ease;
        height: 400px;
        width: 350px;
        padding: 20px;
        box-sizing: border-box;
    }

    .popup-card.active {
        display: flex;
    }

    .popup-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        color: #333;
    }

    .popup-next,
    .popup-back {
        padding: 14px 28px;
        font-size: 1.1rem;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        font-weight: bold;
    }

    .popup-next {
        background: #FFD500;
        color: #333;
        flex-grow: 2;
    }

    .popup-back {
        background: #fff;
        border: 2px solid #ccc;
        color: #666;
        text-align: center;
    }

    .popup-underbuttons {
        width: 100%;
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    /* =========================
   ãŠçŸ¥ã‚‰ã›ãƒ»é‡è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹
========================= */
    .important_section {
        display: flex;
        align-items: center;
        background-color: #969696;
        padding: 0 10px;
    }

    .important_section img {
        width: 30px;
        padding: 5px;
    }

    .important_news {
        font-weight: 500;
        color: #ffffff;
    }

    /* =========================
   ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ï¼ˆæ¤œç´¢ãƒ»ãŠçŸ¥ã‚‰ã›ç­‰ï¼‰
========================= */
    #contents {
        display: flex;
        gap: 10px;
        padding: 0 10px 10px 10px;
    }

    .content-box {
        flex: 1;
        background: var(--color-primary);
        color: #fff;
        padding: 15px 10px;
        border-radius: 8px;
        text-align: center;
        text-decoration: none;
    }

    .content-box .icon img {
        width: 3em;
        object-fit: contain;
    }

    /* =========================
   ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ã‚»ãƒ¬ã‚¯ãƒˆ
========================= */
    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        padding: 10px 40px 10px 12px;
        font-size: var(--font-body);
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: #fff;
        background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0l5 6 5-6H0z' fill='%23333'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 10px 6px;
        cursor: pointer;
    }

    .form-section {
        display: flex;
        flex-direction: column;
        gap: 5px;
        margin: 10px;
    }

    /* =========================
   ãƒˆã‚°ãƒ«ãƒªã‚¹ãƒˆï¼ˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
========================= */
    .personalize {
        margin: 15px 0px;
        background-color: var(--color-secondary);
        padding: 10px;
    }

    .toggle-list {
        margin-bottom: 20px;
        border-radius: 10px;
        overflow: hidden;
        text-align: center;
        background: var(--color-primary);
    }

    .toggle-header {
        display: flex;
        padding: 15px 40px;
        cursor: pointer;
        font-weight: bold;
        color: var(--color-bg);
        font-size: var(--font-h3);
    }

    .toggle-header span {
        margin-left: auto;
        font-size: var(--font-h1);
    }

    .toggle-content {
        display: none;
        padding: 0.1em 0.4em;
        background: #e5ffd3;
    }

    .toggle-list.active .toggle-content {
        display: block;
    }

    /* =========================
   è¨˜äº‹ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
========================= */
    .news-slider {
        position: relative;
        width: 100%;
        margin: auto;
        overflow: hidden;
    }



    .news-track,
    #dynamicNewsTrack {
        display: flex;
        transition: transform 0.5s ease;
    }

    .news-card,
    #dynamicNewsTrack .recommended-card {
        background: #ffffff;
        color: var(--color-text);
        padding: 25px 30px 20px 30px;
        box-sizing: border-box;
    }

    .news-card h3,
    #dynamicNewsTrack .recommended-card h4 {
        margin: 0px;
    }

    .news-card p,
    #dynamicNewsTrack .recommended-card p {
        margin: 0;
    }

    .arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        cursor: pointer;
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 100;
    }

    .arrow.left {
        left: 10px;
    }

    .arrow.right {
        right: 10px;
    }

    .arrow:hover {
        background: #f0f0f0;
    }

    /* =========================
   æ¨å¥¨ã‚«ãƒ¼ãƒ‰ï¼ˆæ¨ªä¸¦ã³ï¼‰
========================= */
    .recommended-container {
        display: flex;
        justify-content: center;
        align-items: stretch;
    }

    .recommended-card {
        background: var(--color-bg);
        padding: 15px;
        border-radius: 5px;
        text-align: center;
        flex: 0 0 calc(100%);
        box-sizing: border-box;
    }

    /* è¦‹å‡ºã—ã¨æœ¬æ–‡ã‚‚å·¦æƒãˆã«ã—ãŸã„å ´åˆã¯è¿½åŠ ã§ã‚‚å®‰å…¨ */
    .recommended-card h4,
    .recommended-card p {
        text-align: left;
    }

    .recommended-card a {
        display: inline-block;
        margin-top: 10px;
        padding: 10px;
        background: #0073e6;
        color: #ffffff;
        border-radius: 8px;
        text-decoration: none;
        /* å³å¯„ã›ç”¨ */
        float: right;
    }

    .news-track {
        display: flex;
        gap: 10px;
        /* ã‚«ãƒ¼ãƒ‰é–“ã®ä½™ç™½ã‚’å›ºå®š */
        transition: transform 0.5s ease;
    }


    .region-cards {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
    }


    .region-card {
        flex: 1;
        background: #ffffff;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: left;
        text-align: center;
        padding: 10px;
        cursor: pointer;
        text-decoration: none;
        color: #333;
        min-width: 0;
    }

    .region-card a {
        display: flex;
        /* æ¨ªä¸¦ã³ */
        align-items: center;
        /* ç”»åƒã¨æ–‡å­—ã®ç¸¦ä½ç½®ã‚’ä¸­å¤®æƒãˆ */
        text-decoration: none;
        font-size: var(--font-p);
        font-weight: 500;
        color: var(--color-text);
        gap: 5px;
        /* ç”»åƒã¨æ–‡å­—ã®é–“éš” */
    }

    .region-card a img {
        width: 50px;
        /* å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ */
        height: 50px;
        object-fit: contain;
        /* ç”»åƒã®ç¸¦æ¨ªæ¯”ã‚’ç¶­æŒ */
    }


    /* =========================
   Intro.js ãƒ„ã‚¢ãƒ¼
========================= */
    .introjs-tooltip {
        background-color: #ffffff;
        border-radius: 15px;
        width: 300px;
        font-size: 18px;
    }

    .introjs-progress {
        background-color: rgb(177, 177, 177);
    }

    .introjs-nextbutton {
        background-color: #FFD500 !important;
        border: none;
        border-radius: 12px;
        padding: 10px 24px;
        font-weight: bold;
    }

    .introjs-prevbutton {
        background-color: #ececec !important;
        color: #333;
        border: none;
        border-radius: 12px;
        padding: 10px 24px;
        font-weight: bold;
    }

    .end {
        text-align: center;
    }

    /* =========================
   ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ç”¨ ãƒ‰ãƒƒãƒˆï¼†ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³
========================= */

    .slider-controls {
        margin-top: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
    }

    .slider-dots {
        display: flex;
        gap: 10px;
    }

    .slider-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #222222;
        border: none;
        padding: 0;
    }

    /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒ‰ãƒƒãƒˆ */
    .slider-dot.active {
        position: relative;
        overflow: hidden;
        background: #eee;
        transform: scale(1.6);
    }

    /* å††å½¢ã‚¿ã‚¤ãƒãƒ¼ï¼ˆå¡—ã‚Šã¤ã¶ã—ï¼‰ */
    .slider-dot.active::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: conic-gradient(#222222 0deg var(--progress, 0deg),
                transparent var(--progress, 0deg) 360deg);
    }

    /* ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ä¸­ã‚†ã£ãã‚Šå¤§ããã—ã¦ã„ããŸã„å ´åˆç”¨ */
    @keyframes dotProgress {
        from {
            transform: scale(1.0);
        }

        to {
            transform: scale(1.6);
        }
    }

    /* ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³ */
    .slider-pause {
        border: 1px solid #ccc;
        background: #fff;
        border-radius: 4px;
        padding: 4px 6px;
        font-size: 12px;
        cursor: pointer;
    }




    /* =========================
   æ±ç”¨ãƒœã‚¿ãƒ³
========================= */
    #start-tour,
    #popupSubmit {
        padding: 15px 40px;
        cursor: pointer;
        font-weight: bold;
        font-size: var(--font-button);
        border-radius: 50px;
    }

    #start-tour {
        background: var(--color-primary);
        color: var(--color-bg);
    }

    #popupSubmit {
        background: #247627;
        color: #f5f8fb;
    }

    /* =========================
   ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
========================= */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<body>
    <div class="wrapper">

        <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²æ—ãƒãƒ¼ -->
        <div id="scrollProgress"></div>
        <!-- ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼šã‚«ãƒ¼ãƒ‰æ–¹å¼ -->
        <div id="popup" style="display:none;">
            <div class="popup-content" id="popupCardContainer">
                <!-- STEP 1 -->
                <div class="popup-card active" data-step="1">
                    <button class="popup-close">&times;</button>
                    <h3>ã‚¬ã‚¤ãƒ‰ã‚’åˆ©ç”¨ã—ã¾ã™ã‹ï¼Ÿ<br></h3>
                    <div class="popup-buttons">
                        <button class="popup-next" data-answer="yes">ã¯ã„</button>
                        <button class="popup-next" data-answer="no">ã„ã„ãˆ</button>
                    </div>
                </div>

                <!-- STEP 2 -->
                <div class="popup-card" data-step="2">
                    <button class="popup-close">&times;</button>
                    <h3>ã‚ãªãŸã¯<br>æœ­å¹Œå¸‚å—åŒºæ°‘ã§ã™ã‹ï¼Ÿ</h3>
                    <div class="popup-buttons">
                        <button class="popup-next" data-answer="yes">ã¯ã„</button>
                        <button class="popup-next" data-answer="no">ã„ã„ãˆ</button>
                    </div>
                    <button class="popup-back">æˆ»ã‚‹</button>
                </div>

                <!-- STEP 3ï¼ˆå—åŒºå‘ã‘ç«‹å ´ï¼‰ -->
                <div class="popup-card" data-step="3">
                    <button class="popup-close">&times;</button>
                    <h3>ã‚ãªãŸã®ç«‹å ´ã‚’<br>æ•™ãˆã¦ãã ã•ã„</h3>
                    <select id="popupAudienceYes">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="ä¸€äººæš®ã‚‰ã—">ä¸€äººæš®ã‚‰ã—</option>
                        <option value="äº‹æ¥­è€…">äº‹æ¥­è€…</option>
                        <option value="å­è‚²ã¦">å­è‚²ã¦</option>
                        <option value="ã‚·ãƒ‹ã‚¢">ã‚·ãƒ‹ã‚¢</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                    <div class="popup-underbuttons">
                        <button class="popup-back">æˆ»ã‚‹</button>
                        <button class="popup-next">æ¬¡ã¸</button>
                    </div>
                </div>

                <!-- STEP 4ï¼ˆå—åŒºä»¥å¤–å‘ã‘ç«‹å ´ï¼‰ -->
                <div class="popup-card" data-step="4">
                    <button class="popup-close">&times;</button>
                    <h3>ã‚ãªãŸã®ç«‹å ´ã‚’<br>æ•™ãˆã¦ãã ã•ã„</h3>
                    <select id="popupAudienceNo">
                        <option value="ãã®ä»–">ãã®ä»–</option>
                        <option value="èª¿ã¹å­¦ç¿’">èª¿ã¹å­¦ç¿’</option>
                        <option value="å¼•ã£è¶Šã—æ¤œè¨">å¼•ã£è¶Šã—ã‚’æ¤œè¨</option>
                        <option value="è¦³å…‰">è¦³å…‰</option>
                    </select>
                    <div class="popup-underbuttons">
                        <button class="popup-back">æˆ»ã‚‹</button>
                        <button class="popup-next">æ¬¡ã¸</button>
                    </div>
                </div>

                <!-- STEP 5ï¼ˆå—åŒºæ°‘ã®ã¿åœ°åŸŸé¸æŠï¼‰ -->
                <div class="popup-card" data-step="5">
                    <button class="popup-close">&times;</button>
                    <h3>ãŠä½ã¾ã„ã®åœ°åŸŸã‚’<br>æ•™ãˆã¦ãã ã•ã„</h3>
                    <select id="popupRegion">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="area_1">çœŸé§’å†…æŸä¸˜/æ±ç”º/å¹¸ç”º/æ³‰ç”º/å—ç”º</option>
                        <option value="area_2">çŸ³å±±æ±/å¸¸ç›¤/æ»é‡/èŠ¸è¡“ã®æ£®</option>
                        <option value="area_3">è—¤é‡/ç™½å·/ç°¾èˆ/ç ¥å±±/è±Šæ»/ç¡¬çŸ³å±±/å°é‡‘æ¹¯/å®šå±±æ¸“æ¸©æ³‰è¥¿ãƒ»æ±/å®šå±±æ¸“</option>
                        <option value="area_4">çœŸé§’å†…æœ¬ç”º/å®¹ç”º/æ›™ç”º/ç·‘ç”º</option>
                        <option value="area_5">è—»å²©ä¸‹ãƒ»åŒ—ãƒæ²¢ãƒ»ä¸­ãƒæ²¢/å—30æ¡ï½39æ¡ã®è¥¿</option>
                        <option value="area_6">å—æ²¢ãƒ»çŸ³å±±</option>
                        <option value="area_7">çœŸé§’å†…ãƒ»å·æ²¿</option>
                        <option value="area_8">æ¾„å·</option>
                        <option value="ãªã—">ãªã—</option>
                    </select>
                    <div class="popup-underbuttons">
                        <button class="popup-back">æˆ»ã‚‹</button>
                        <button class="popup-next">æ¬¡ã¸</button>
                    </div>
                </div>

                <!-- STEP 6ï¼ˆã‚¬ã‚¤ãƒ‰é–‹å§‹ï¼‰ -->
                <div class="popup-card" data-step="6">
                    <h3>è¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸï¼<br>ã‚¬ã‚¤ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™</h3>
                    <button id="popupSubmit">ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹</button>
                    <button class="popup-back">æˆ»ã‚‹</button>
                </div>
            </div>
        </div>


        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼èª­ã¿è¾¼ã¿ -->
        <div id="header"></div>

        <!-- ä½™ç™½ -->
        <div style="height: 55px;  background-color: #ffffff;">
        </div>

    </div>

    <main>

        <!-- Heroã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ -->
        <section class="hero">
            <a href="https://www.city.sapporo.jp/minami/news/202510/20251018.html" class="hero-slide">
                <img src="/data/photo_1.jpg" alt="ç”»åƒ1">
            </a>
            <a href="https://www.city.sapporo.jp/minami/news/202510/20251028.html" class="hero-slide">
                <img src="/data/photo_2.JPG" alt="ç”»åƒ2">
            </a>
            <a href="https://www.city.sapporo.jp/minami/news/202510/20251020.html" class="hero-slide">
                <img src="/data/photo_3.jpg" alt="ç”»åƒ3">
            </a>
        </section>

        <section class="important_section">
            <div class="icon">
                <img src="data/home_2.png" alt="ãŠçŸ¥ã‚‰ã›ã‚¢ã‚¤ã‚³ãƒ³">
            </div>
            <p class="important_news">æˆ¸ç±ã¸ã®ãƒ•ãƒªã‚¬ãƒŠè¨˜è¼‰ã«é–¢ã™ã‚‹é€šçŸ¥</p>
        </section>

        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ -->
        <script async src="https://cse.google.com/cse.js?cx=d50400fa95b444d4e">
        </script>
        <div class="gcse-search"></div>

        <section id="contents">
            <a href="search.html" class="content-box">
                <div class="icon">
                    <img src="data/home_1.png" alt="æƒ…å ±ã‚’æ¢ã™ã‚¢ã‚¤ã‚³ãƒ³">
                </div>
                <div class="text">
                    <h2>æƒ…å ±ã‚’æ¢ã™</h2>
                    <!-- <h4>æ‰‹ç¶šãã‚’çŸ¥ã‚ŠãŸã„</h4> -->
                </div>
            </a>
            <a href="news.html" class="content-box">
                <div class="icon">
                    <img src="data/home_2.png" alt="ãŠçŸ¥ã‚‰ã›ã‚¢ã‚¤ã‚³ãƒ³">
                </div>
                <div class="text">
                    <h2>ãŠçŸ¥ã‚‰ã›</h2>
                    <!-- <h4>ãƒ‹ãƒ¥ãƒ¼ã‚¹/ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹</h4> -->
                </div>
            </a>
        </section>


        <section class="personalize">
            <div class="toggle-list">
                <div id="tog-header" class="toggle-header">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ã™ã‚‹<span>+</span></div>
                <div class="toggle-content">
                    <div class="form-section">
                        <label for="region">ãŠä½ã¾ã„ã®åœ°åŸŸ</label>
                        <select id="region">
                            <option value="ãªã—">ãªã—</option>
                            <option value="area_1">çœŸé§’å†…æŸä¸˜/æ±ç”º/å¹¸ç”º/æ³‰ç”º/å—ç”º</option>
                            <option value="area_2">çŸ³å±±æ±/å¸¸ç›¤/æ»é‡/èŠ¸è¡“ã®æ£®</option>
                            <option value="area_3">è—¤é‡/ç™½å·/ç°¾èˆ/ç ¥å±±/è±Šæ»/ç¡¬çŸ³å±±/å°é‡‘æ¹¯/å®šå±±æ¸“æ¸©æ³‰è¥¿ãƒ»æ±/å®šå±±æ¸“</option>
                            <option value="area_4">çœŸé§’å†…æœ¬ç”º/å®¹ç”º/æ›™ç”º/ç·‘ç”º</option>
                            <option value="area_5">è—»å²©ä¸‹ãƒ»åŒ—ãƒæ²¢ãƒ»ä¸­ãƒæ²¢/å—30æ¡ï½39æ¡ã®è¥¿</option>
                            <option value="area_6">å—æ²¢ãƒ»çŸ³å±±</option>
                            <option value="area_7">çœŸé§’å†…ãƒ»å·æ²¿</option>
                            <option value="area_8">æ¾„å·</option>
                        </select>
                    </div>

                    <div class="form-section">
                        <label for="audience">å¯¾è±¡è€…</label>
                        <select id="audience">
                            <option value="ãã®ä»–">ãã®ä»–</option>
                            <option value="ä¸€èˆ¬">å—åŒºåŒºæ°‘</option>
                            <option value="èª¿ã¹å­¦ç¿’">èª¿ã¹å­¦ç¿’</option>
                            <option value="å¼•ã£è¶Šã—æ¤œè¨">å¼•ã£è¶Šã—ã‚’æ¤œè¨</option>
                            <option value="è¦³å…‰">è¦³å…‰</option>
                            <option value="ä¸€äººæš®ã‚‰ã—">ä¸€äººæš®ã‚‰ã—</option>
                            <option value="äº‹æ¥­è€…">äº‹æ¥­è€…</option>
                            <option value="å­è‚²ã¦">å­è‚²ã¦</option>
                            <option value="ã‚·ãƒ‹ã‚¢">ã‚·ãƒ‹ã‚¢</option>
                        </select>
                    </div>

                    <div class="form-section font-size-toggle">
                        <label>æ–‡å­—ã‚µã‚¤ã‚º</label>
                        <div>
                            <label><input type="radio" name="font-size" value="small"> å°</label>
                            <label><input type="radio" name="font-size" value="medium"> ä¸­</label>
                            <label><input type="radio" name="font-size" value="large" checked> å¤§</label>
                        </div>
                    </div>
                </div>
                <!-- toggleå¤– -->
            </div>
            <!-- åœ°åŸŸã‚«ãƒ¼ãƒ‰ï¼ˆå›ºå®šæ¨ªä¸¦ã³ï¼‰ -->
            <section id="regionCards" class="region-cards">
                <!-- JSã§ã‚´ãƒŸãƒ»æ–½è¨­ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ  -->
            </section>

            <!-- ãŠã™ã™ã‚è¨˜äº‹ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ -->
            <div class="news-slider" id="dynamicNewsSlider">
                <button class="arrow left" id="dynamicPrevBtn">&#10094;</button>
                <div class="news-track" id="dynamicNewsTrack"></div>
                <button class="arrow right" id="dynamicNextBtn">&#10095;</button>
                <!-- ã“ã“ã‹ã‚‰è¿½åŠ ï¼šå††å½¢ã‚¿ã‚¤ãƒãƒ¼ -->

                <div class="slider-controls">
                    <button class="slider-pause" id="sliderPauseBtn" aria-label="è‡ªå‹•å†ç”Ÿã‚’ä¸€æ™‚åœæ­¢">â¸</button>
                    <div class="slider-dots" id="sliderDots"></div>
                </div>
                <!-- â–² ã“ã“ã¾ã§ â–² -->

            </div>


        </section>




        <section class="end">
            <button id="start-tour" data-step="3">
                ã‚¬ã‚¤ãƒ‰é–‹å§‹
            </button>
        </section>




    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼èª­ã¿è¾¼ã¿ -->
    <div id="footer"></div>

    <!-- JS èª­ã¿è¾¼ã¿ -->

    <script>
        /* ============================================================
           ğŸŸ¢ è¦ç´ å–å¾—
        ============================================================ */
        const regionSelect = document.getElementById('region');
        const audienceSelect = document.getElementById('audience');
        const dynamicTrack = document.getElementById('dynamicNewsTrack');
        const regionCardsContainer = document.getElementById('regionCards');
        const popup = document.getElementById('popup');
        const popupCards = document.querySelectorAll('.popup-card');
        const popupSubmit = document.getElementById('popupSubmit');
        const popupRegion = document.getElementById('popupRegion');
        const popupAudienceYes = document.getElementById('popupAudienceYes');
        const popupAudienceNo = document.getElementById('popupAudienceNo');
        const startTourBtn = document.getElementById('start-tour');
        const sliderDotsContainer = document.getElementById('sliderDots');
        const pauseBtn = document.getElementById('sliderPauseBtn');

        let currentDynamicIndex = 0;
        let currentStep = 1;
        let userData = { isFirst: null, isResident: null, audience: null, region: null };
        const SLIDE_INTERVAL = 5000;
        let timerFill;  // â†â˜…ã“ã‚ŒãŒãªã„ã¨ãƒªã‚»ãƒƒãƒˆã§ããªã„
        let timerAnimationId;     // requestAnimationFrame ã®IDã‚’å…¥ã‚Œã¦ãŠãç”¨
        let timerStartTime;       // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹æ™‚åˆ»
        let autoSlideId = null;
        let isPaused = false;

        /* ============================================================
           ğŸŸ¢ ãƒ‡ãƒ¼ã‚¿å®šç¾©
        ============================================================ */
        const recommendedArticles = {
            ä¸€èˆ¬: [
                { title: "ç°¡å˜ã«è¨¼æ˜æ›¸ç™ºè¡Œã‚’ã™ã‚‹ã‚³ãƒ„", url: "#" },
                { title: "å›½æ°‘å¥åº·ä¿é™ºæ–™ã®å¤œé–“ç´ä»˜ç›¸è«‡ã®ãŠçŸ¥ã‚‰ã›", url: "https://www.city.sapporo.jp/minami/hoken/yakannofusodan.html" },
                { title: "å—åŒºå½¹æ‰€é£Ÿå ‚å–¶æ¥­å†é–‹ã®ãŠçŸ¥ã‚‰ã›", url: "https://www.city.sapporo.jp/minami/oshirase/20251020shokudo.html" }
            ],
            ä¸€äººæš®ã‚‰ã—: [
                { title: "æ¥åºã›ãšã«ã§ãã‚‹æ‰‹ç¶šã", url: "https://www.city.sapporo.jp/minami/annai/jyuminhyoraityonashi.html" },
                { title: "ä½å±…ç¢ºä¿çµ¦ä»˜é‡‘ã«ã¤ã„ã¦", url: "https://step-sapporo.jp/housingbenefit/?utm_source=chatgpt.com" },
                { title: "ã‚¢ãƒ«ãƒã‚¤ãƒˆæƒ…å ±ã¾ã¨ã‚", url: "#" }
            ],
            äº‹æ¥­è€…: [
                { title: "ä¼æ¥­DXæ¨é€²ã«å‘ã‘ãŸæ”¯æ´", url: "https://www.city.sapporo.jp/keizai/top/topics/it/kigyoudx.html?utm_source=chatgpt.com" },
                { title: "ä¸­å°ä¼æ¥­ã¸ã®èè³‡ãƒ»æ”¯æ´", url: "https://www.city.sapporo.jp/keizai/chusho/index.html" },
                { title: "äº‹æ¥­æ‰€ã‹ã‚‰å‡ºã‚‹ã”ã¿", url: "https://www.city.sapporo.jp/seiso/jigyousyo/jigyousyo.html" }
            ],
            ãã®ä»–: [
                { title: "ä¼æ¥­DXæ¨é€²ã«å‘ã‘ãŸæ”¯æ´", url: "https://www.city.sapporo.jp/keizai/top/topics/it/kigyoudx.html?utm_source=chatgpt.com" },
                { title: "ä¸­å°ä¼æ¥­ã¸ã®èè³‡ãƒ»æ”¯æ´", url: "https://www.city.sapporo.jp/keizai/chusho/index.html" },
                { title: "äº‹æ¥­æ‰€ã‹ã‚‰å‡ºã‚‹ã”ã¿", url: "https://www.city.sapporo.jp/seiso/jigyousyo/jigyousyo.html" }
            ],
            èª¿ã¹å­¦ç¿’: [
                { title: "å‹•ç”»ã§çŸ¥ã‚‹å—åŒº", url: "https://www.city.sapporo.jp/keizai/top/topics/it/kigyoudx.html?utm_source=chatgpt.com" },
                { title: "åºƒå ±ã•ã£ã½ã‚", url: "https://www.city.sapporo.jp/keizai/chusho/index.html" },
                { title: "å—åŒºã®åœ°åŸŸç´¹ä»‹", url: "https://www.city.sapporo.jp/seiso/jigyousyo/jigyousyo.html" }
            ]
        };

        const calendarPages = {
            area_1: [{ name: "ã”ã¿åé›†æ—¥", url: "facility_sumikawa_library.html" }],
            area_2: [{ name: "ã”ã¿åé›†æ—¥", url: "facility_sumikawa_library.html" }],
            area_3: [{ name: "ã”ã¿åé›†æ—¥", url: "facility_sumikawa_library.html" }],
            area_4: [{ name: "ã”ã¿åé›†æ—¥", url: "facility_sumikawa_library.html" }],
            area_5: [{ name: "ã”ã¿åé›†æ—¥", url: "facility_sumikawa_library.html" }]
        };

        const nearbyFacilities = {
            area_1: [{ name: "è¿‘ãã®æ–½è¨­", url: "facility_sumikawa_library.html" }],
            area_2: [{ name: "è¿‘ãã®æ–½è¨­", url: "facility_sumikawa_library.html" }],
            area_3: [{ name: "è¿‘ãã®æ–½è¨­", url: "facility_sumikawa_library.html" }],
            area_4: [{ name: "è¿‘ãã®æ–½è¨­", url: "facility_sumikawa_library.html" }],
            area_5: [{ name: "è¿‘ãã®æ–½è¨­", url: "facility_sumikawa_library.html" }]
        };

        /* ============================================================
           ğŸŸ¢ åˆå›è¨ªå•ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—åˆ¶å¾¡
        ============================================================ */
        const hasVisited_index = localStorage.getItem('hasVisited_index');
        const savedRegion = localStorage.getItem('selectedRegion');
        const savedAudience = localStorage.getItem('selectedAudience');

        function showStep(step) {
            popupCards.forEach(card => card.classList.toggle('active', Number(card.dataset.step) === step));
            currentStep = step;
        }

        // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€Œæ¬¡ã¸ã€ã€Œã¯ã„ã€ã€Œã„ã„ãˆã€ãƒœã‚¿ãƒ³
        document.querySelectorAll('.popup-next, .popup-skip').forEach(btn => {
            btn.addEventListener('click', e => {
                const answer = e.target.dataset.answer;
                switch (currentStep) {
                    case 1:
                        if (answer === 'no') {
                            localStorage.setItem('hasVisited_index', 'true');
                            popup.style.display = 'none';
                            return;
                        }
                        userData.isFirst = true;
                        showStep(2);
                        break;
                    case 2:
                        userData.isResident = answer;
                        if (answer === 'yes') showStep(3);
                        else showStep(4);
                        break;
                    case 3:
                        if (!popupAudienceYes.value) { alert("ç«‹å ´ã‚’é¸æŠã—ã¦ãã ã•ã„"); return; }
                        userData.audience = popupAudienceYes.value;
                        showStep(5);
                        break;
                    case 4:
                        if (!popupAudienceNo.value) { alert("ç«‹å ´ã‚’é¸æŠã—ã¦ãã ã•ã„"); return; }
                        userData.audience = popupAudienceNo.value;
                        showStep(6);
                        break;
                    case 5:
                        if (!popupRegion.value) { alert("åœ°åŸŸã‚’é¸æŠã—ã¦ãã ã•ã„"); return; }
                        userData.region = popupRegion.value;
                        showStep(6);
                        break;
                }
            });
        });

        // æˆ»ã‚‹ãƒœã‚¿ãƒ³
        document.querySelectorAll('.popup-back').forEach(btn => {
            btn.addEventListener('click', () => {
                switch (currentStep) {
                    case 2: showStep(1); break;
                    case 3: showStep(2); break;
                    case 4: showStep(2); break;
                    case 5: showStep(3); break;
                    case 6: userData.isResident === 'yes' ? showStep(5) : showStep(4); break;
                }
            });
        });

        // å®Œäº†ãƒœã‚¿ãƒ³
        popupSubmit.addEventListener('click', () => {
            if (userData.isResident === 'no') userData.region = 'ãªã—';
            localStorage.setItem('selectedRegion', userData.region);
            localStorage.setItem('selectedAudience', userData.audience);
            localStorage.setItem('hasVisited_index', 'true');
            regionSelect.value = userData.region;
            audienceSelect.value = userData.audience;
            updateDynamicContent();
            popup.style.display = 'none';
            startTour();
        });

        /* ============================================================
           ğŸŸ¢ ã‚»ãƒ¬ã‚¯ãƒˆå¤‰æ›´æ™‚ï¼šä¿å­˜ï¼‹æ›´æ–°
        ============================================================ */
        regionSelect.addEventListener('change', () => { localStorage.setItem('selectedRegion', regionSelect.value); updateDynamicContent(); });
        audienceSelect.addEventListener('change', () => { localStorage.setItem('selectedAudience', audienceSelect.value); updateDynamicContent(); });

        /* ============================================================
           ğŸŸ¢ ãƒ„ã‚¢ãƒ¼ãƒœã‚¿ãƒ³
        ============================================================ */
        startTourBtn.addEventListener('click', () => startTour());

        function startTour() {
            introJs().setOptions({
                steps: [
                    { element: '#emergency', intro: 'ã“ã“ã‹ã‚‰ç·Šæ€¥æƒ…å ±ãƒ»ç·Šæ€¥æ™‚ã®å¯¾å¿œã‚’ç¢ºèªã§ãã¾ã™', position: 'bottom' },
                    { element: '#tog-header', intro: 'ã“ã“ã§ã¯ã€ãŠã™ã™ã‚æƒ…å ±ãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼<br>ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦è¨­å®šç”»é¢ã‚’é–‹ã‘ã¾ã™ï¼', position: 'right' },
                    { element: '#start-tour', intro: 'ã“ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ä»Šã®ã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚Œã¾ã™', position: 'top' }
                ],
                showProgress: true,
                exitOnOverlayClick: false
            }).start();
        }

        /* ============================================================
           ğŸŸ¢ å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°
        ============================================================ */
        function updateDynamicContent() {
            const region = regionSelect.value;
            const audience = audienceSelect.value;
            dynamicTrack.innerHTML = '';
            regionCardsContainer.innerHTML = '';
            sliderDotsContainer.innerHTML = ''; // â˜…ãƒ‰ãƒƒãƒˆã‚‚ãƒªã‚»ãƒƒãƒˆ

            if (region && region !== 'ãªã—') {
                calendarPages[region]?.forEach(garbage => {
                    const card = document.createElement('div');
                    card.classList.add('region-card');
                    card.innerHTML = `<a href="${garbage.url}" target="_blank"><img src="data/garbage.png" alt="ã‚¢ã‚¤ã‚³ãƒ³">ã”ã¿åé›†æ—¥</a>`;
                    regionCardsContainer.appendChild(card);
                });
                nearbyFacilities[region]?.forEach(facility => {
                    const card = document.createElement('div');
                    card.classList.add('region-card');
                    card.innerHTML = `<a href="${facility.url}" target="_blank"><img src="data/facility.png" alt="ã‚¢ã‚¤ã‚³ãƒ³">è¿‘ãã®æ–½è¨­</a>`;
                    regionCardsContainer.appendChild(card);
                });
            }

            recommendedArticles[audience]?.forEach(article => {
                const card = document.createElement('div');
                card.classList.add('recommended-card');
                card.innerHTML = `<h4>${article.title}</h4><p>è¨˜äº‹ã®ç°¡å˜ãªèª¬æ˜ã‚’ã“ã“ã«å…¥ã‚Œã‚‰ã‚Œã¾ã™</p><a href="${article.url}" target="_blank">è©³ã—ãè¦‹ã‚‹</a>`;
                dynamicTrack.appendChild(card);
            });

            currentDynamicIndex = 0;
            createDots();       // â˜…ãƒ‰ãƒƒãƒˆã‚’ä½œã‚‹
            updateDynamicSlide();
        }




        /* è¨˜äº‹ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆ¶å¾¡ */
        function updateDynamicSlide() {
            const cards = dynamicTrack.children;
            if (!cards.length) return;
            const style = getComputedStyle(dynamicTrack);
            const gap = parseInt(style.gap) || 0;
            const cardWidth = cards[0].offsetWidth + gap;
            dynamicTrack.style.transform = `translateX(${-currentDynamicIndex * cardWidth}px)`;
        }
        // æ¬¡ã¸ / å‰ã¸ãƒœã‚¿ãƒ³
        document.getElementById('dynamicNextBtn').addEventListener('click', () => {
            goToSlide(currentDynamicIndex + 1);
            restartDotTimer();
            restartAutoSlide();
        });

        document.getElementById('dynamicPrevBtn').addEventListener('click', () => {
            goToSlide(currentDynamicIndex - 1);
            restartDotTimer();
            restartAutoSlide();
        });

        // è‡ªå‹•ã‚¹ãƒ©ã‚¤ãƒ‰åˆ¶å¾¡
        function startAutoDynamicSlide() {
            if (autoSlideId || isPaused) return; // ã™ã§ã«å‹•ã„ã¦ã‚‹ or ä¸€æ™‚åœæ­¢ä¸­ãªã‚‰ä½•ã‚‚ã—ãªã„

            autoSlideId = setInterval(() => {
                goToSlide(currentDynamicIndex + 1);
            }, SLIDE_INTERVAL);
        }

        function stopAutoDynamicSlide() {
            if (!autoSlideId) return;
            clearInterval(autoSlideId);
            autoSlideId = null;
        }

        function restartAutoSlide() {
            if (isPaused) return;
            stopAutoDynamicSlide();
            startAutoDynamicSlide();
        }

        // ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³
        pauseBtn.addEventListener('click', () => {
            if (isPaused) {
                // å†é–‹
                isPaused = false;

                pauseBtn.textContent = 'â¸';
                startAutoDynamicSlide();
                restartDotTimer();
            } else {
                // ä¸€æ™‚åœæ­¢
                isPaused = true;
                pauseBtn.textContent = 'â–¶';
                stopAutoDynamicSlide();
                // â˜… å††ã®æå†™ã‚’æ­¢ã‚ã‚‹
                if (dotTimerAnimationId) {
                    cancelAnimationFrame(dotTimerAnimationId);
                    dotTimerAnimationId = null;
                }
            }
        });


        // ãƒ‰ãƒƒãƒˆã‚’ç”Ÿæˆ
        function createDots() {
            sliderDotsContainer.innerHTML = '';
            const cards = dynamicTrack.children;
            if (!cards.length) return;

            for (let i = 0; i < cards.length; i++) {
                const dot = document.createElement('button');
                dot.type = 'button';
                dot.classList.add('slider-dot');
                dot.dataset.index = i;

                dot.addEventListener('click', () => {
                    goToSlide(i);
                    restartDotTimer();
                    restartAutoSlide();
                });

                sliderDotsContainer.appendChild(dot);
            }
            updateDots();
        }

        /* ============================================================
   ğŸŸ¡ ãƒ‰ãƒƒãƒˆç”¨å††å½¢ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ï¼ˆã‚¿ã‚¤ãƒãƒ¼ï¼‰
============================================================ */

        let dotTimerStartTime = 0;
        let dotTimerAnimationId = null;

        function restartDotTimer() {
            const activeDot = document.querySelector('.slider-dot.active');
            if (!activeDot) return;

            // é€²è¡Œä¸­ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Œã°åœæ­¢
            if (dotTimerAnimationId) {
                cancelAnimationFrame(dotTimerAnimationId);
            }

            // CSSå¤‰æ•°ãƒªã‚»ãƒƒãƒˆ
            activeDot.style.setProperty("--progress", "0deg");

            // ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚åˆ»è¨˜éŒ²
            dotTimerStartTime = performance.now();

            animateDotTimer();
        }

        function animateDotTimer(now) {
            const activeDot = document.querySelector('.slider-dot.active');
            if (!activeDot) return;

            if (!now) now = performance.now();

            const elapsed = now - dotTimerStartTime;
            const progress = Math.min(elapsed / SLIDE_INTERVAL, 1); // 0ã€œ1
            const angle = 360 * progress;

            activeDot.style.setProperty("--progress", angle + "deg");

            if (progress < 1) {
                dotTimerAnimationId = requestAnimationFrame(animateDotTimer);
            }
        }


        // ãƒ‰ãƒƒãƒˆã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
        function updateDots() {
            const dots = sliderDotsContainer.querySelectorAll('.slider-dot');
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentDynamicIndex);
            });
            if (!isPaused) restartDotTimer();
        }

        // æŒ‡å®šã‚¹ãƒ©ã‚¤ãƒ‰ã¸ç§»å‹•
        function goToSlide(index) {
            const cards = dynamicTrack.children;
            if (!cards.length) return;

            const max = cards.length;
            currentDynamicIndex = (index + max) % max; // ãƒã‚¤ãƒŠã‚¹å¯¾å¿œ
            updateDynamicSlide();
        }

        // ã‚¹ãƒ©ã‚¤ãƒ‰ä½ç½®ã‚’åæ˜ 
        function updateDynamicSlide() {
            const cards = dynamicTrack.children;
            if (!cards.length) return;
            const style = getComputedStyle(dynamicTrack);
            const gap = parseInt(style.gap) || 0;
            const cardWidth = cards[0].offsetWidth + gap;
            dynamicTrack.style.transform = `translateX(${-currentDynamicIndex * cardWidth}px)`;
            updateDots();
        }



        /* ============================================================
           ğŸŸ¢ ãŠã™ã™ã‚è¨˜äº‹ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ è‡ªå‹•ã‚¹ãƒ©ã‚¤ãƒ‰ ï¼‹ å††ã‚¿ã‚¤ãƒãƒ¼
        ============================================================ */
        function restartTimerAnimation() {
            if (!timerFill) return;

            // ã‚‚ã—å‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ã„ã¦ã„ãŸã‚‰æ­¢ã‚ã‚‹
            if (timerAnimationId) {
                cancelAnimationFrame(timerAnimationId);
            }

            // ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚åˆ»ã‚’ä¿å­˜
            timerStartTime = performance.now();

            // æœ€åˆã¯ 0åº¦ï¼ˆä½•ã‚‚å¡—ã‚‰ã‚Œã¦ãªã„çŠ¶æ…‹ï¼‰
            timerFill.style.setProperty('--progress', '0deg');

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            animateTimer();
        }
        // è‡ªå‹•ã‚¹ãƒ©ã‚¤ãƒ‰åˆ¶å¾¡ï¼ˆãƒ‰ãƒƒãƒˆå††ã‚¿ã‚¤ãƒãƒ¼é€£å‹•ï¼‰
        function startAutoDynamicSlide() {
            if (autoSlideId || isPaused) return;

            restartDotTimer(); // â˜… æœ€åˆã®ãƒ‰ãƒƒãƒˆã®å††é–‹å§‹

            autoSlideId = setInterval(() => {
                goToSlide(currentDynamicIndex + 1);
                restartDotTimer(); // â˜… åˆ‡ã‚Šæ›¿ãˆã”ã¨ã«å††ã‚’ãƒªã‚»ãƒƒãƒˆ
            }, SLIDE_INTERVAL);
        }



        // 1ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«å‘¼ã°ã‚Œã¦å††ã®æç”»ã‚’æ›´æ–°ã™ã‚‹
        function animateTimer(now) {
            if (!timerFill) return;

            if (!now) {
                now = performance.now();
            }

            const elapsed = now - timerStartTime;                 // çµŒéæ™‚é–“(ms)
            const progress = Math.min(elapsed / SLIDE_INTERVAL, 1); // 0ã€œ1

            // 0 â†’ 360åº¦ã¾ã§å¡—ã‚‹
            const angle = 360 * progress;
            timerFill.style.setProperty('--progress', angle + 'deg');

            // ã¾ã çµ‚ã‚ã£ã¦ãªã‘ã‚Œã°æ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚‚æ›´æ–°
            if (progress < 1) {
                timerAnimationId = requestAnimationFrame(animateTimer);
            }
        }


        /* ============================================================
           ğŸŸ¢ Heroã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼
        ============================================================ */
        function initHeroSlide() {
            const slides = document.querySelectorAll('.hero-slide');
            let currentSlide = 0;
            const interval = 7000;
            function showSlide(index) { slides.forEach((slide, i) => slide.classList.toggle('active', i === index)); }
            showSlide(currentSlide);
            setInterval(() => { currentSlide = (currentSlide + 1) % slides.length; showSlide(currentSlide); }, interval);
        }

        /* ============================================================
           ğŸŸ¢ æ–‡å­—ã‚µã‚¤ã‚ºåˆ‡æ›¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¸­ï¼‰
        ============================================================ */
        function initFontSize() {
            const fontSizeRadios = document.querySelectorAll('input[name="font-size"]');
            const savedFontSize = localStorage.getItem('fontSize') || 'medium';
            applyFontSize(savedFontSize);
            fontSizeRadios.forEach(radio => {
                radio.checked = radio.value === savedFontSize;
                radio.addEventListener('change', () => applyFontSize(radio.value));
            });
            function applyFontSize(size) {
                document.body.classList.remove('font-small', 'font-medium', 'font-large');
                if (size === 'small') document.body.classList.add('font-small');
                if (size === 'medium') document.body.classList.add('font-medium');
                if (size === 'large') document.body.classList.add('font-large');
                localStorage.setItem('fontSize', size);
            }
        }

        /* ============================================================
           ğŸŸ¢ ãƒˆã‚°ãƒ«ãƒªã‚¹ãƒˆ
        ============================================================ */
        function initToggleList() {
            document.querySelectorAll('.toggle-header').forEach(header => {
                header.addEventListener('click', () => {
                    const parent = header.parentElement;
                    parent.classList.toggle('active');
                    header.querySelector('span').textContent = parent.classList.contains('active') ? 'âˆ’' : '+';
                });
            });
        }

        // é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚’å–å¾—
        const popupCloseBtns = document.querySelectorAll('.popup-close');

        // ã‚¯ãƒªãƒƒã‚¯æ™‚ã« popup ã‚’éè¡¨ç¤ºã«ã™ã‚‹
        popupCloseBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                localStorage.setItem('hasVisited_index', 'true');
                popup.style.display = 'none';
            });
        });

        /* ============================================================
           ğŸŸ¢ ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
        ============================================================ */
        window.addEventListener('load', () => {
            if (!hasVisited_index) popup.style.display = 'flex';
            if (savedRegion) regionSelect.value = savedRegion;
            if (savedAudience) audienceSelect.value = savedAudience;


            updateDynamicContent();
            initHeroSlide();
            initFontSize();
            initToggleList();
            startAutoDynamicSlide();
        });

    </script>

</body>

</html>